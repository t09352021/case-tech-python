import requests
import json
import pprint

class GetApi():
  def __init__(self,link):
    self.request= requests.get(link)
    self.data = json.loads(self.request.content)
    print(self.data)
    self.dados_ident =json.dumps(self.data,indent=4)
    #print(self.dados_ident)

class Minha_Lista_Netflix:
  def __init__(self):
    self.favoritos=[]

  def adicionar(self,filme):
    self.favoritos.append(filme)
    
  def remover(self,filme):
    self.favoritos.pop()
    len(self.favoritos)
    if ( len(self.favoritos) == 0):
        print("\nLista vazia\n")

  def leitura(self):
    pprint.pprint(self.favoritos)

  def atualizar(self,titulo_original,titulo_port):
    for item in self.favoritos:
      if item['Filme'] == titulo_original:
         item['Filme'] = titulo_port

  
  def contar(self):
    contagem = len(self.favoritos)
    texto = (f"Há {contagem} filme(s) nesta lista lista\n")
    print(texto)

  def ordenar(self):
   print("\nLista de filmes por ordem alfabética: ")
   filmes_ordenados = sorted(self.favoritos, key=lambda obj: obj["Filme"])
   for item in filmes_ordenados:
      print(f"{item['Filme']}")
     


if __name__ == "__main__":
  api = GetApi("https://ghibliapi.herokuapp.com/films")
  Bruna = Minha_Lista_Netflix()

  api_tratados = []
  for filme in api.data:
    informacoes={}
    informacoes['Filme']=filme['title']
    informacoes['Descrição']=filme['description']
    informacoes['Direção']=filme['director']
    informacoes['Duração']=filme['running_time']
    informacoes['Ano']=filme['release_date']  
    api_tratados.append(informacoes)

#pprint.pprint(api_tratados)
#Bruna.adicionar(api_tratados[i])
#Bruna.leitura()
#Bruna.contar()
#Bruna.atualizar("Castle in the Sky","O Castelo no Céu")
#Bruna.leitura()
#Bruna.remover("O Castelo no Céu")
#Bruna.leitura()
#Bruna.ordenar()
